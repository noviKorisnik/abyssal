<div class="active-game">
  <h2>Active Game</h2>
  @if (state?.active) {
    <p>Current Player: {{ state?.active?.currentPlayerId }}</p>
    <p>Your Turn: {{ isPlayerTurn ? 'Yes' : 'No' }}</p>
    
    <app-timer-bar 
      [totalTime]="turnTimeLimitSeconds"
      [remainingTime]="remainingTurnTimeSeconds"
      [color]="currentPlayerColor"
      label="Turn">
    </app-timer-bar>
    <div class="board">
      @for (row of board; track $index) {
        <div class="row">
          @for (cell of row; track $index; let x = $index) {
            <div class="cell-wrapper">
              <div
                [ngClass]="getCellClasses(x, board.indexOf(row))"
                (click)="isPlayerTurn ? pickCell.emit({ x, y: board.indexOf(row) }) : null"
              >
              <div></div>
              <div></div>
                <!-- All hit/sunk markers are now handled by cell classes and CSS pseudo-elements -->
              </div>
            </div>
          }
        </div>
      }
    </div>
  }
</div>
